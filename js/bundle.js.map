{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/js/main.js","src/js/raf.js","src/js/roadLane.js","src/js/roadNetwork.js","src/js/roadNetworkFactory.js","src/js/roadSegment.js"],"names":[],"mappings":"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","file":"bundle.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import {\n\tcreateRingRoad\n}\nfrom './roadNetworkFactory';\nimport RoadNetwork from './roadNetwork';\nimport RoadSegment from './roadSegment';\nimport raf from './raf';\n\nraf();\n\nlet dt = 0.2;\nlet simulationTime = 0;\nlet iterationCount = 0;\n\nlet running = false;\nlet time;\nlet timeWarp = 4;\n\n// let roadNetwork = new RoadNetwork();\n//\n// let roadSegment1 = new RoadSegment(1);\n// let roadSegment2 = new RoadSegment(3);\n//\n// roadNetwork.addRoadSegment(roadSegment1);\n// roadNetwork.addRoadSegment(roadSegment2);\n\nlet roadLength = 1000;\nlet numberOfLanes = 1;\nlet roadNetwork = createRingRoad(roadLength, numberOfLanes);\n\ndebugger;\nstart();\n\nfunction start() {\n\trunning = true;\n\ttime = new Date().getTime();\n\tmainLoop();\n}\n\nfunction mainLoop() {\n\tif (running) {\n\n\t\trequestAnimationFrame(mainLoop);\n\n\t\tvar now = new Date().getTime();\n\t\tdt = (now - (time || now)) / 1000;\n\t\tdt *= timeWarp;\n\t\ttime = now;\n\n\t\t// update state\n\t\tsimulationTime += dt;\n\t\titerationCount++;\n\t\troadNetwork.timeStep(dt);\n\n\t\t// draw\n\n\t\t// limit iterations for now\n\t\tif (iterationCount >= 5) {\n\t\t\trunning = false;\n\t\t}\n\n\t} else {\n\t\tconsole.log('timeStep: ', dt, ' -- simTime: ', simulationTime,\n\t\t\t' -- iterationcount: ', iterationCount);\n\t}\n\n}\n","// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n\n// requestAnimationFrame polyfill by Erik MÃ¶ller\n// fixes from Paul Irish and Tino Zijdel\n\nexport default function raf() {\n\tvar lastTime = 0;\n\tvar vendors = ['ms', 'moz', 'webkit', 'o'];\n\tfor (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n\t\twindow.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n\t\twindow.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||\n\t\t\twindow[vendors[x] + 'CancelRequestAnimationFrame'];\n\t}\n\n\tif (!window.requestAnimationFrame)\n\t\twindow.requestAnimationFrame = function(callback, element) {\n\t\t\tvar currTime = new Date().getTime();\n\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\n\t\t\tvar id = window.setTimeout(function() {\n\t\t\t\t\tcallback(currTime + timeToCall);\n\t\t\t\t},\n\t\t\t\ttimeToCall);\n\t\t\tlastTime = currTime + timeToCall;\n\t\t\treturn id;\n\t\t};\n\n\tif (!window.cancelAnimationFrame)\n\t\twindow.cancelAnimationFrame = function(id) {\n\t\t\tclearTimeout(id);\n\t\t};\n\n\tconsole.log('requestAnimationFrame set: ', window.requestAnimationFrame);\n}\n","export default class RoadLane {\n\n  constructor(roadSegment) {\n    this.vehicles = [];\n    this.roadSegment = roadSegment;\n    this.sinkLaneSegment = null; //TODO\n    this.sourceLaneSegment = null; //TODO\n  }\n\n  getRoadLength() {\n    return this.roadSegment.roadLength;\n  };\n\n  addVehicle(vehicle) {\n    this.vehicles.push(vehicle);\n  };\n\n  updateVehicleAccelerations() {\n    for (var i = 0, len = this.vehicles.length; i < len; i++) {\n      var vehicle = this.vehicles[i];\n      vehicle.updateAcceleration(this);\n    }\n  };\n\n  updateSpeedAndPosition(dt) {\n    for (var i = 0; i < this.vehicles.length; i++) {\n      var vehicle = this.vehicles[i];\n      vehicle.updateSpeedAndPosition(dt);\n      if (this.roadSegment.parameters.ringRoad && vehicle.position > this.roadSegment\n        .parameters.roadLength) {\n        vehicle.position -= this.roadSegment.parameters.roadLength;\n      }\n    }\n  };\n\n  getLaneRearVehicle() {\n    if (this.vehicles.length > 0) {\n      return this.vehicles[this.vehicles.length - 1];\n    }\n    return null;\n  };\n\n  getLaneFrontVehicle() {\n    if (this.vehicles.length > 0) {\n      return this.vehicles[0];\n    }\n    return null;\n  };\n\n  getRearVehicle(position) {\n    var index = this._positionBinarySearch(position);\n    var insertionPoint = -index - 1;\n    if (index >= 0) {\n      // exact match found, so return the matched vehicle\n      if (index < this.vehicles.length) {\n        return this.vehicles[index];\n      }\n    } else {\n      // get next vehicle if not past end\n      if (insertionPoint < this.vehicles.length) {\n        return this.vehicles[insertionPoint];\n      }\n    }\n    if (this.sourceLaneSegment !== null) {\n      // didn't find a rear vehicle in the current road segment, so\n      // check the previous (source) road segment\n      // and continue until a vehicle is found or no further source is connected to laneSegment\n      var sourceFrontVehicle = null;\n      var source = this.sourceLaneSegment;\n      var accumDistance = 0;\n      do {\n        accumDistance += source.getRoadLength();\n        sourceFrontVehicle = source.laneFrontVehicle();\n        source = source.sourceLaneSegment();\n      } while (sourceFrontVehicle === null && source !== null);\n      if (sourceFrontVehicle !== null) {\n        var newPosition = sourceFrontVehicle.getFrontPosition() -\n          accumDistance;\n        return movsim.simulation.moveable.create(sourceFrontVehicle,\n          newPosition);\n      }\n    }\n    return null;\n  };\n\n  getFrontVehicle(position) {\n    var index = this._positionBinarySearch(position);\n    var insertionPoint = -index - 1;\n    if (index > 0) {\n      return this.vehicles[index - 1]; // exact match found\n    } else if (insertionPoint > 0) {\n      return this.vehicles[insertionPoint - 1];\n    }\n    // index == 0 or insertionPoint == 0\n    // subject vehicle is front vehicle on this road segment, so check for vehicles\n    // on sink lane segment\n    if (this.sinkLaneSegment !== null) {\n      var sinkRearVehicle = null;\n      var sink = this.sinkLaneSegment;\n      var accumDistance = this.getRoadLength();\n      do {\n        sinkRearVehicle = sink.rearVehicle();\n        if (sinkRearVehicle === null) {\n          accumDistance += sink.getRoadLength();\n        }\n        sink = sink.sinkLaneSegment();\n      } while (sinkRearVehicle === null && sink !== null);\n      if (sinkRearVehicle !== null) {\n        var newPosition = sinkRearVehicle.getFrontPosition() + accumDistance;\n        return movsim.simulation.moveable.create(sinkRearVehicle, newPosition);\n      }\n    }\n    return null;\n  };\n\n  updateOutflow(dt) {\n    // remove vehicles with position > this.roadSegment.roadLength (later: assign to linked lane)\n    // for ringroad set vehicle at beginning of lane (periodic boundary conditions)\n    var roadLength = this.roadSegment.roadLength;\n    var vehicle;\n    for (var i = 0, len = this.vehicles.length; i < len; i++) {\n      vehicle = this.vehicles[i];\n      if (vehicle.position > roadLength) {\n        //                this.vehicles.remove(i);\n        // ring road special case TODO remove\n        vehicle.position -= roadLength;\n      }\n    }\n    this._sortVehicles();\n  };\n\n  updateInflow(dt) {\n    // TODO\n  };\n\n  _sortVehicles() {\n    this.vehicles.sort(function(a, b) {\n      return a.position - b.position;\n    });\n  };\n\n  getLeader(vehicle) {\n    var vehicleIndex = this._getPositionInArray(vehicle.id);\n    if (this.vehicles.length <= 1) {\n      return null;\n    }\n    if (vehicleIndex === this.vehicles.length - 1) {\n      return this.roadSegment.ringRoad === true ? this.vehicles[0] : null;\n    }\n    return this.vehicles[vehicleIndex + 1];\n  };\n\n  getPositionInArray(id) {\n    // TODO es6 -> findIndex\n    var index = this.vehicles.map(function(el) {\n      return el.id;\n    }).indexOf(id);\n    return index;\n  };\n\n}\n","export default class RoadNetwork {\n\n\tconstructor() {\n\t\tthis.roadSegments = [];\n\t\tconsole.log('contructor RoadNetwork')\n\t}\n\n\taddRoadSegment(roadSegment) {\n\t\tthis.roadSegments.push(roadSegment);\n\t\tconsole.log('  added ', roadSegment, ' to roadNetwork', this.roadSegments);\n\t}\n\n\ttimeStep(dt) {\n\t\tthis.roadSegments.forEach(function(roadSegmet) {\n\t\t\troadSegmet.considerLaneChanges(dt);\n\t\t});\n\n\t\tthis.roadSegments.forEach(function(roadSegmet) {\n\t\t\troadSegmet.updateVehicleAccelerations(dt);\n\t\t});\n\n\t\tthis.roadSegments.forEach(function(roadSegmet) {\n\t\t\troadSegmet.updateVehiclePositionsAndSpeeds(dt);\n\t\t});\n\n\t\t// for debugging\n\t\tthis.roadSegments.forEach(function(roadSegmet) {\n\t\t\troadSegmet.checkForInconsistencies(dt);\n\t\t});\n\n\t\tthis.roadSegments.forEach(function(roadSegmet) {\n\t\t\troadSegmet.updateOutflow(dt);\n\t\t});\n\n\t\tthis.roadSegments.forEach(function(roadSegmet) {\n\t\t\troadSegmet.updateInflow(dt);\n\t\t});\n\t}\n\n}\n","import RoadNetwork from './roadNetwork';\nimport RoadSegment from './roadSegment';\n\nexport function createRingRoad(roadLength, numberOfLanes) {\n  var roadNetwork = new RoadNetwork();\n\n  // create one roadSection representing a ring road (anti-clockwise driving direction)\n  var roadSegmentParameters = RoadSegment.getDefaultParameters();\n  roadSegmentParameters.ringRoad = true;\n  roadSegmentParameters.roadLength = roadLength;\n  roadSegmentParameters.numberOfLanes = numberOfLanes;\n  roadSegmentParameters.globalX = 0;\n  roadSegmentParameters.globalY = 200;\n  roadSegmentParameters.heading = 0;\n  roadSegmentParameters.curvature = 2 * Math.PI / roadLength;\n\n  var roadSegment = new RoadSegment(roadSegmentParameters);\n\n  roadNetwork.addRoadSegment(roadSegment);\n  return roadNetwork;\n};\n","import RoadLane from './roadLane';\n\nexport default class RoadSegment {\n\n\tconstructor(options) {\n\t\tthis.roadLanes = [];\n\t\tdebugger;\n\t\tfor (let i = 0; i <= options.numberOfLanes; i++) {\n\t\t\tlet roadLane = new RoadLane(this);\n\t\t\tthis.roadLanes.push(roadLane);\n\t\t}\n\n\t\tconsole.log('constructor RoadSegment');\n\t}\n\n\tconsiderLaneChanges(dt) {\n\t\tconsole.log('no lane changes');\n\t}\n\n\tupdateVehicleAccelerations(dt) {\n\t\tconsole.log('updateVehicleAccelerations with dt: ', dt);\n\t\tfor (let i = 0; i < lanes; i++) {\n\t\t\tthis.roadLanes[i].updateVehicleAccelerations(dt);\n\t\t}\n\t}\n\n\tupdateVehiclePositionsAndSpeeds(dt) {\n\t\tconsole.log('updateVehiclePositionsAndSpeeds with dt: ', dt);\n\t\tfor (let i = 0; i < lanes; i++) {\n\t\t\tthis.roadLanes[i].updateVehiclePositionsAndSpeeds(dt);\n\t\t}\n\t}\n\n\tcheckForInconsistencies(dt) {\n\t\tconsole.log('checkForInconsistencies with dt: ', dt);\n\t\t// TODO implement check for negative vehicle distances\n\t}\n\n\tupdateOutflow(dt) {\n\t\tconsole.log('updateOutflow with dt: ', dt);\n\t\tfor (let i = 0; i < lanes; i++) {\n\t\t\tthis.roadLanes[i].updateOutflow(dt);\n\t\t}\n\t}\n\n\tupdateInflow(dt) {\n\t\tconsole.log('updateInflow with dt: ', dt);\n\t\tfor (let i = 0; i < lanes; i++) {\n\t\t\tthis.roadLanes[i].updateInflow(dt);\n\t\t}\n\t}\n\n\tstatic getDefaultParameters() {\n\t\tlet roadSectionParameters = {};\n\t\troadSectionParameters.roadLength = 1000;\n\t\troadSectionParameters.numberOfLanes = 1;\n\t\troadSectionParameters.initDensityPerLane = 10 / 1000;\n\t\troadSectionParameters.initTruckFraction = 0.1;\n\t\troadSectionParameters.ringRoad = false;\n\t\troadSectionParameters.globalX = 0;\n\t\troadSectionParameters.globalY = 0;\n\t\troadSectionParameters.heading = 0;\n\t\troadSectionParameters.curvature = 0;\n\t\troadSectionParameters.laneWidth = 10;\n\t\treturn roadSectionParameters;\n\t}\n}\n"]}