{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/js/main.js","src/js/raf.js","src/js/raodSegment.js","src/js/roadNetwork.js"],"names":[],"mappings":"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","file":"bundle.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import RoadNetwork from './roadNetwork';\nimport RoadSegment from './raodSegment';\nimport raf from './raf';\n\n// raf();\n\nlet dt = 0.2;\nlet simulationTime = 0;\nlet iterationCount = 0;\n\nlet running = false;\nlet time;\nlet timeWarp = 4;\n\nlet roadNetwork = new RoadNetwork();\n\nlet roadSegment1 = new RoadSegment(1);\nlet roadSegment2 = new RoadSegment(3);\n\nroadNetwork.addRoadSegment(roadSegment1);\nroadNetwork.addRoadSegment(roadSegment2);\n\n\nstart();\n\nfunction start() {\n  running = true;\n  time = new Date().getTime();\n  mainLoop();\n}\n\nfunction mainLoop() {\n  if (running) {\n\n    requestAnimationFrame(mainLoop);\n\n    var now = new Date().getTime();\n    dt = (now - (time || now)) / 1000;\n    dt *= timeWarp;\n    time = now;\n\n    // update state\n    simulationTime += dt;\n    iterationCount++;\n    roadNetwork.timeStep(dt);\n\n    // draw\n\n    // limit iterations for now\n    if (iterationCount >= 5) {\n      running = false;\n    }\n\n  } else {\n    console.log('timeStep: ', dt, ' -- simTime: ', simulationTime,\n      ' -- iterationcount: ', iterationCount);\n  }\n\n}\n","// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n\n// requestAnimationFrame polyfill by Erik MÃ¶ller\n// fixes from Paul Irish and Tino Zijdel\n\nexport default function raf() {\n\tvar lastTime = 0;\n\tvar vendors = ['ms', 'moz', 'webkit', 'o'];\n\tfor (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n\t\twindow.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n\t\twindow.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||\n\t\t\twindow[vendors[x] + 'CancelRequestAnimationFrame'];\n\t}\n\n\tif (!window.requestAnimationFrame)\n\t\twindow.requestAnimationFrame = function(callback, element) {\n\t\t\tvar currTime = new Date().getTime();\n\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\n\t\t\tvar id = window.setTimeout(function() {\n\t\t\t\t\tcallback(currTime + timeToCall);\n\t\t\t\t},\n\t\t\t\ttimeToCall);\n\t\t\tlastTime = currTime + timeToCall;\n\t\t\treturn id;\n\t\t};\n\n\tif (!window.cancelAnimationFrame)\n\t\twindow.cancelAnimationFrame = function(id) {\n\t\t\tclearTimeout(id);\n\t\t};\n\n\tconsole.log('requestAnimationFrame set: ', window.requestAnimationFrame);\n}\n","export default class RoadSegment {\n\n  constructor(lanes) {\n    this.roadLanes = [];\n\n    for (let i = 0; i < lanes; i++) {\n      let roadLane = i;\n      this.roadLanes.push(roadLane);\n    }\n\n    console.log('constructor RoadSegment');\n  }\n\n  considerLaneChanges(dt) {\n    console.log('no lane changes');\n  }\n\n  updateVehicleAccelerations(dt) {\n    console.log('updateVehicleAccelerations with dt: ', dt);\n  }\n\n  updateVehiclePositionsAndSpeeds(dt) {\n    console.log('updateVehiclePositionsAndSpeeds with dt: ', dt);\n  }\n\n  checkForInconsistencies(dt) {\n    console.log('checkForInconsistencies with dt: ', dt);\n  }\n\n  updateOutflow(dt) {\n    console.log('updateOutflow with dt: ', dt);\n  }\n\n  updateInflow(dt) {\n    console.log('updateInflow with dt: ', dt);\n  }\n\n}\n","export default class RoadNetwork {\n\n\n\tconstructor() {\n\t\tthis.roadSegments = [];\n\t\tconsole.log('contructor RoadNetwork')\n\t}\n\n\taddRoadSegment(roadSegment) {\n\t\tthis.roadSegments.push(roadSegment);\n\t\tconsole.log('  added ', roadSegment, ' to roadNetwork', this.roadSegments);\n\t}\n\n\ttimeStep(dt) {\n\n\t\tthis.roadSegments.forEach(function(roadSegmet) {\n\t\t\troadSegmet.considerLaneChanges(dt);\n\t\t});\n\n\t\tthis.roadSegments.forEach(function(roadSegmet) {\n\t\t\troadSegmet.updateVehicleAccelerations(dt);\n\t\t});\n\n\t\tthis.roadSegments.forEach(function(roadSegmet) {\n\t\t\troadSegmet.updateVehiclePositionsAndSpeeds(dt);\n\t\t});\n\n\t\t// for debugging\n\t\tthis.roadSegments.forEach(function(roadSegmet) {\n\t\t\troadSegmet.checkForInconsistencies(dt);\n\t\t});\n\n\t\tthis.roadSegments.forEach(function(roadSegmet) {\n\t\t\troadSegmet.updateOutflow(dt);\n\t\t});\n\n\t\tthis.roadSegments.forEach(function(roadSegmet) {\n\t\t\troadSegmet.updateInflow(dt);\n\t\t});\n\n\t}\n}\n"]}